<div class="cpi-settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>CPI - Copilot Interceptor</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">

            <div class="cpi-section">
                <p id="cpi_status" class="cpi-status">λ΅λ”© μ¤‘...</p>
            </div>

            <hr class="sysHR" />

            <!-- μ—”λ“ν¬μΈνΈ μ„ νƒ -->
            <div class="cpi-section">
                <h4><i class="fa-solid fa-route"></i> μ—”λ“ν¬μΈνΈ</h4>
                <select id="cpi_endpoint" class="text_pole" style="font-size:13px;">
                    <option value="anthropic">Anthropic (/v1/messages) β€” RisuAIμ™€ λ™μΌ, κ¶μ¥</option>
                    <option value="openai">OpenAI (/chat/completions) β€” κΈ°λ³Έ νΈν™</option>
                </select>
                <small class="cpi-dim">Anthropic: system role μ™„λ²½ μ§€μ›, λ‹µλ³€ ν€„λ¦¬ν‹° λ™μΌ<br>OpenAI: νΈν™μ„± λ†’μ§€λ§ system μ²λ¦¬κ°€ λ‹¤λ¥Ό μ μμ</small>
            </div>

            <hr class="sysHR" />

            <!-- λ©”μΈ μ„¤μ • -->
            <div class="cpi-section">
                <h4><i class="fa-solid fa-gear"></i> μ„¤μ •</h4>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_enabled" type="checkbox" checked />
                    <span>μΈν„°μ…‰ν„° ν™μ„±ν™”</span>
                </label>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_use_vscode_headers" type="checkbox" checked />
                    <span>VSCode μ„μ¥ ν—¤λ” (κ¶μ¥)</span>
                </label>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_basic_auth_compat" type="checkbox" />
                    <span>basicAuth νΈν™ λ¨λ“</span>
                </label>
            </div>

            <hr class="sysHR" />

            <!-- OpenAI μ „μ© λ³΄μ • μµμ… -->
            <div class="cpi-section cpi-openai-only">
                <h4><i class="fa-solid fa-wrench"></i> OpenAI ν¬λ§· λ³΄μ • (OpenAI λ¨λ“ μ „μ©)</h4>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_remove_prefill" type="checkbox" checked />
                    <span>ν”„λ¦¬ν•„ μλ™ μ κ±°</span>
                    <small class="cpi-dim cpi-toggle-desc">λ§μ§€λ§‰ assistant λ©”μ‹μ§€ μ κ±°</small>
                </label>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_trim_assistant" type="checkbox" checked />
                    <span>assistant λ κ³µλ°± μ κ±° (trim)</span>
                    <small class="cpi-dim cpi-toggle-desc">trailing whitespace μ—λ¬ λ°©μ§€</small>
                </label>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_force_last_user" type="checkbox" checked />
                    <span>λ§μ§€λ§‰ λ©”μ‹μ§€ user κ°•μ </span>
                    <small class="cpi-dim cpi-toggle-desc">systemμΌλ΅ λλ‚λ” κ²½μ° userλ΅ λ³€ν™</small>
                </label>
            </div>

            <hr class="sysHR" />

            <!-- λ²„μ „ -->
            <div class="cpi-section">
                <h4><i class="fa-solid fa-code-branch"></i> λ²„μ „</h4>
                <div class="cpi-version-row">
                    <label for="cpi_chat_version">Copilot Chat:</label>
                    <input id="cpi_chat_version" type="text" class="text_pole" value="0.26.4" placeholder="0.26.4" />
                </div>
                <div class="cpi-version-row">
                    <label for="cpi_code_version">VSCode:</label>
                    <input id="cpi_code_version" type="text" class="text_pole" value="1.100.0" placeholder="1.100.0" />
                </div>
                <input id="cpi_reset_session" class="menu_button" type="button" value="π”„ μ„Έμ… μ΄κΈ°ν™”" style="margin-top:6px;" />
            </div>

            <hr class="sysHR" />

            <!-- λ””λ²„κ·Έ λ΅κ·Έ -->
            <div class="cpi-section">
                <h4><i class="fa-solid fa-terminal"></i> λ””λ²„κ·Έ λ΅κ·Έ</h4>
                <div class="cpi-log-toolbar">
                    <label class="checkbox_label" style="margin:0;">
                        <input id="cpi_debug_log" type="checkbox" checked />
                        <span>λ΅κ·Έ ν‘μ‹</span>
                    </label>
                    <input id="cpi_clear_log" class="menu_button" type="button" value="π—‘οΈ μ΄κΈ°ν™”" style="width:auto;padding:2px 10px;font-size:11px;" />
                </div>
                <div id="cpi_log_panel">
                    <div id="cpi_log_content" class="cpi-log-box">
                        <div style="color:#666;">λ΅κ·Έ λ€κΈ° μ¤‘...</div>
                    </div>
                </div>
            </div>

            <hr class="sysHR" />
        </div>
    </div>
</div>
