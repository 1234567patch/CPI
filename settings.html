<div class="cpi-settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>CPI - Copilot Interceptor</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">

            <!-- 상태 -->
            <div class="cpi-section">
                <p id="cpi_status" class="cpi-status">로딩 중...</p>
            </div>

            <hr class="sysHR" />

            <!-- 메인 설정 -->
            <div class="cpi-section">
                <h4><i class="fa-solid fa-gear"></i> 설정</h4>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_enabled" type="checkbox" checked />
                    <span>인터셉터 활성화</span>
                </label>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_use_vscode_headers" type="checkbox" checked />
                    <span>VSCode 위장 헤더 (권장)</span>
                    <small class="cpi-dim cpi-toggle-desc">tid 토큰 + VSCode 동일 헤더 전송</small>
                </label>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_remove_prefill" type="checkbox" checked />
                    <span>프리필 자동 제거</span>
                    <small class="cpi-dim cpi-toggle-desc">마지막 assistant 메시지를 자동 제거하여 프리필 에러 방지</small>
                </label>

                <label class="checkbox_label cpi-toggle">
                    <input id="cpi_basic_auth_compat" type="checkbox" />
                    <span>basicAuth 호환 모드</span>
                    <small class="cpi-dim cpi-toggle-desc">basicAuthMode 사용시 켜세요. 프록시 요청에 인증 정보를 포함합니다</small>
                </label>
            </div>

            <hr class="sysHR" />

            <!-- 버전 설정 -->
            <div class="cpi-section">
                <h4><i class="fa-solid fa-code-branch"></i> 버전</h4>
                <div class="cpi-version-row">
                    <label for="cpi_chat_version">Copilot Chat:</label>
                    <input id="cpi_chat_version" type="text" class="text_pole" value="0.26.4" placeholder="0.26.4" />
                </div>
                <div class="cpi-version-row">
                    <label for="cpi_code_version">VSCode:</label>
                    <input id="cpi_code_version" type="text" class="text_pole" value="1.100.0" placeholder="1.100.0" />
                </div>
                <input id="cpi_reset_session" class="menu_button" type="button" value="🔄 세션 초기화" style="margin-top:6px;" />
            </div>

            <hr class="sysHR" />

            <!-- 디버그 로그 -->
            <div class="cpi-section">
                <h4><i class="fa-solid fa-terminal"></i> 디버그 로그</h4>

                <div class="cpi-log-toolbar">
                    <label class="checkbox_label" style="margin:0;">
                        <input id="cpi_debug_log" type="checkbox" checked />
                        <span>로그 표시</span>
                    </label>
                    <input id="cpi_clear_log" class="menu_button" type="button" value="🗑️ 초기화" style="width:auto; padding:2px 10px; font-size:11px;" />
                </div>

                <div id="cpi_log_panel">
                    <div id="cpi_log_content" class="cpi-log-box">
                        <div style="color:#666;">로그 대기 중...</div>
                    </div>
                </div>
            </div>

            <hr class="sysHR" />
        </div>
    </div>
</div>
